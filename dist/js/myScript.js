window.onload=function(){function t(t,i){$("#large_container").css({width:n.width(),height:n.height()}).show();var e="img/"+t+".large.jpg",a=new Image;a.src=e,a.onload=function(){var t=this.width,i=this.height,a=n.width(),s=n.height(),o=parseInt((a-s*t/i)/2),c=parseInt((s-a*i/t)/2);d.css("width","auto").css("height","auto"),d.css("padding-left","0px").css("padding-top","0px"),i/t>1.2?d.attr("src",e).css("height",s).css("padding-left",o+"px"):d.attr("src",e).css("width",a).css("padding-top",c+"px")},i&&i()}var i=16,n=$(window),e=function(){for(var t=1,e=n.width(),a=Math.floor((e-3*t)/4),d="",s=1;s<i;s++){var o=t,c="img/"+s+".jpg";s%4==1&&(o=0),d+='<li data-id="'+s+'" style="width:'+a+"px;height:"+a+"px;padding-top:"+t+"px;padding-left:"+o+'px"><canvas id="cvs_'+s+'"></canvas></li>';var h=new Image;h.index=s,h.onload=function(){var t=$("#cvs_"+this.index)[0].getContext("2d");t.width=this.width,t.height=this.height,t.drawImage(this,0,0)},h.src=c}$("#container").html(d)};e();var a,d=$("#large_img"),s=d[0];$("li").addClass("animated bounceIn"),$("#container li").click(function(){var i=a=$(this).attr("data-id");t(i)}),$("#large_container").tap(function(){$(this).hide()}).swipeLeft(function(){a++,a>i?a=i:t(a,function(){s.addEventListener("webkitAnimationEnd",function(){d.removeClass("animated bounceInRight"),s.removeEventListener("webkitAnimationEnd",function(){})},!1),d.addClass("animated bounceInRight")})}).swipeRight(function(){a--,a<1?a=1:t(a,function(){d.addClass("animated bounceInLeft"),s.addEventListener("webkitAnimationEnd",function(){d.removeClass("animated bounceInLeft"),s.removeEventListener("webkitAnimationEnd",function(){})},!1)})})};